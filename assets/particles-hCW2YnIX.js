import{r as i,j}from"./index-BDuXLi4I.js";function B(){const[c,f]=i.useState({x:0,y:0});return i.useEffect(()=>{const h=l=>{f({x:l.clientX,y:l.clientY})};return window.addEventListener("mousemove",h),()=>{window.removeEventListener("mousemove",h)}},[]),c}function H(c){c=c.replace("#",""),c.length===3&&(c=c.split("").map(w=>w+w).join(""));const f=parseInt(c,16),h=f>>16&255,l=f>>8&255,z=f&255;return[h,l,z]}const N=({className:c="",quantity:f=100,staticity:h=50,ease:l=50,size:z=.4,refresh:w=!1,color:P="red",vx:b=0,vy:A=0})=>{const d=i.useRef(null),x=i.useRef(null),r=i.useRef(null),g=i.useRef([]),y=B(),M=i.useRef({x:0,y:0}),e=i.useRef({w:0,h:0}),m=typeof window<"u"?window.devicePixelRatio:1;i.useEffect(()=>(d.current&&(r.current=d.current.getContext("2d")),v(),Y(),window.addEventListener("resize",v),()=>{window.removeEventListener("resize",v)}),[P]),i.useEffect(()=>{F()},[y.x,y.y]),i.useEffect(()=>{v()},[w]);const v=()=>{$(),S()},F=()=>{if(d.current){const t=d.current.getBoundingClientRect(),{w:n,h:s}=e.current,a=y.x-t.left-n/2,o=y.y-t.top-s/2;a<n/2&&a>-n/2&&o<s/2&&o>-s/2&&(M.current.x=a,M.current.y=o)}},$=()=>{x.current&&d.current&&r.current&&(g.current.length=0,e.current.w=x.current.offsetWidth,e.current.h=x.current.offsetHeight,d.current.width=e.current.w*m,d.current.height=e.current.h*m,d.current.style.width=`${e.current.w}px`,d.current.style.height=`${e.current.h}px`,r.current.scale(m,m))},C=()=>{const t=Math.floor(Math.random()*e.current.w),n=Math.floor(Math.random()*e.current.h),s=0,a=0,o=Math.floor(Math.random()*2)+z,u=0,p=parseFloat((Math.random()*.6+.1).toFixed(1)),R=(Math.random()-.5)*.1,T=(Math.random()-.5)*.1,q=.1+Math.random()*4;return{x:t,y:n,translateX:s,translateY:a,size:o,alpha:u,targetAlpha:p,dx:R,dy:T,magnetism:q}},L=H(P),E=(t,n=!1)=>{if(r.current){const{x:s,y:a,translateX:o,translateY:u,size:p,alpha:R}=t;r.current.translate(o,u),r.current.beginPath(),r.current.arc(s,a,p,0,2*Math.PI),r.current.fillStyle=`rgba(${L.join(", ")}, ${R})`,r.current.fill(),r.current.setTransform(m,0,0,m,0,0),n||g.current.push(t)}},X=()=>{r.current&&r.current.clearRect(0,0,e.current.w,e.current.h)},S=()=>{X();const t=f;for(let n=0;n<t;n++){const s=C();E(s)}},I=(t,n,s,a,o)=>{const u=(t-n)*(o-a)/(s-n)+a;return u>0?u:0},Y=()=>{X(),g.current.forEach((t,n)=>{const a=[t.x+t.translateX-t.size,e.current.w-t.x-t.translateX-t.size,t.y+t.translateY-t.size,e.current.h-t.y-t.translateY-t.size].reduce((u,p)=>Math.min(u,p)),o=parseFloat(I(a,0,20,0,1).toFixed(2));if(o>1?(t.alpha+=.02,t.alpha>t.targetAlpha&&(t.alpha=t.targetAlpha)):t.alpha=t.targetAlpha*o,t.x+=t.dx+b,t.y+=t.dy+A,t.translateX+=(M.current.x/(h/t.magnetism)-t.translateX)/l,t.translateY+=(M.current.y/(h/t.magnetism)-t.translateY)/l,E(t,!0),t.x<-t.size||t.x>e.current.w+t.size||t.y<-t.size||t.y>e.current.h+t.size){g.current.splice(n,1);const u=C();E(u)}}),window.requestAnimationFrame(Y)};return j.jsx("div",{className:c,ref:x,"aria-hidden":"true",children:j.jsx("canvas",{ref:d,className:"size-full"})})},W=N;export{W as P};
